\include{header}

\title{Generating Simple Loop Invariants in Whiley}
\author{David Barnett}
\date{Supervisor: Lindsay Groves}

\begin{document}
\frame{\titlepage}



\begin{frame}{Outline}

\begin{itemize}
\item Motivation
\item Background
\item Solution
\item Evaluation
\item Conclusion
\end{itemize}

\end{frame}



\begin{frame}{Motivation}

Goals of the project
\begin{itemize}
\item{To generate simple loop invariants}
\item{To investigate how generating loop invariants affect learning about loop
        invariants}
\end{itemize}

\end{frame}



\begin{frame}{Background}

\end{frame}



\begin{frame}{Solution}

Generates 4 loop invariants

\begin{itemize}
\item Starting bound
\item Equal array length
\item Upper bound
\item Array iterative assignment
\end{itemize}

\end{frame}



\begin{frame}[fragile]{Starting Bound}

\begin{columns}

\begin{column}{0.5\textwidth}
\begin{itemize}
\item Generally counting variables
\end{itemize}

\end{column}

\begin{column}{0.5\textwidth}
\begin{verbatim}
int i = 0
while C
    where i >= 0
    i = i + 1
\end{verbatim}

\end{column}

\end{columns}

\end{frame}



\begin{frame}[fragile]{Equal array length}

\begin{columns}

\begin{column}{0.5\textwidth}
\end{column}

\begin{column}{0.5\textwidth}
\begin{verbatim}
copy = items
// or
copy = [0; |items|]

while i <= |items|
    where |copy| == |items|:
    copy[i] = f(items[i])
    i = i + 1
\end{verbatim}
\end{column}
\end{columns}

\end{frame}



\begin{frame}[fragile]{Upper bound}

\begin{columns}

\begin{column}{0.5\textwidth}
\end{column}

\begin{column}{0.5\textwidth}
\begin{verbatim}
int i = 0
while i < C
    where i <= C:
    i = i + 1
\end{verbatim}
\end{column}

\end{columns}

\end{frame}



\begin{frame}[fragile]{Array iterative assignment}

\begin{columns}

\begin{column}{0.5\textwidth}
\end{column}

\begin{column}{0.5\textwidth}
\begin{verbatim}
int i = 0
while i <= |items|
    where all { k in 0..i |
        items[k] == f(k) }:
    items[i] = f(i)
    i = i + 1
\end{verbatim}
\end{column}

\end{columns}

\end{frame}

\begin{frame}{Evaluation}

\begin{block}{Data sets}

\begin{itemize}
\item Whiley Compiler test suite
\item SWEN224 assignments and labs
\end{itemize}

\end{block}

\end{frame}



\begin{frame}{Evaluation tool}

\begin{block}{Assumptions}

\begin{itemize}
\item Code to be evaluated can be compiled and verified normally.
\end{itemize}

\end{block}


\begin{block}{Steps}
\begin{itemize}
\item Breakdown
\item Minimize
\item Reporting
\end{itemize}
\end{block}

\end{frame}



\begin{frame}[fragile]{Evaluation - Breakdown}

Normalizes the loop invariants in source code

\begin{columns}
\begin{column}{0.4\textwidth}
\begin{block}{Before}
\begin{verbatim}
where A && B && C
\end{verbatim}
\end{block}
\end{column}
\begin{column}{0.1\textwidth}
$\rightarrow$
\end{column}
\begin{column}{0.4\textwidth}
\begin{block}{After}
\begin{verbatim}
where A
where B
where C
\end{verbatim}
\end{block}
\end{column}
\end{columns}

\end{frame}



\begin{frame}[fragile]{Evaluation - Minimize}

Finds the smallest combonation of invariants to verify
the program.

\begin{columns}
\begin{column}{0.4\textwidth}
\begin{block}{Invariants}
\begin{verbatim}
where A
where B
where C
\end{verbatim}
\end{block}
\end{column}
\begin{column}{0.4\textwidth}
\begin{align*}
    &\{ A \} \\
    &\{ B \} \\
    &\{ C \} \\
    &\{ A, B \} \\
    &... \\
    &\{ A, B, C \} \\
\end{align*}
\end{column}
\end{columns}

\end{frame}

\begin{frame}[fragile]{Evaluation - Report}

Counts the invariants present, in source and generated.

\end{frame}



\begin{frame}{Results}

Evaluation of the Whiley Compiler test suite

\begin{longtable}[]{@{}llll@{}}
\toprule
Type & Control & Minimized & Generated Invariants\tabularnewline
\midrule
\endhead
Total Invariants & 160 & 135 & 176\tabularnewline
Source Invariants & 160 & 135 & 41\tabularnewline
Generated Invariants & & & 135\tabularnewline
Starting bound & & & 94\tabularnewline
Arrays Equal & & & 16\tabularnewline
Upper Bound & & & 17\tabularnewline
Iterative Assign & & & 8\tabularnewline
\bottomrule
\end{longtable}

\end{frame}



\begin{frame}{Results}

\begin{itemize}
\item 70\% reduction of invariants required in source code
\item Total invariants increased
\end{itemize}

\end{frame}



\begin{frame}{Conclusion}

\begin{itemize}
\item Can generate simple loop invariants
\item Reduced number of invariants programmer provides
\end{itemize}

\end{frame}



\begin{frame}

\begin{center}
    \Huge{Questions}
\end{center}

\end{frame}



\begin{frame}{Additional examples}

\end{frame}

\end{document}
